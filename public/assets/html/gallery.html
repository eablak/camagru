<!DOCTYPE html>
<html>
    <head>
        <title>Gallery Page</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

        <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
        <link href="//fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i" rel="stylesheet">
        <link href="/assets/css/gallery.css" rel="stylesheet" type="text/css" media="all" />
        
    </head>
<body>

	<header>
        <?php if($condition) : ?>
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
            <!-- <a class="navbar-brand" href="#">Navbar</a> -->
            
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ml-auto">
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/settings">Settings</a>
                    </li>

                    <li class="nav-item active">
                        <a class="nav-link" href="/logout">Logout</a>
                    </li>
                        
                    </ul>
                </div>
            </nav>
        <?php endif; ?>
	</header>


	<main id="content">

        <section id="main-content"> 

            <?php foreach($relatedImages as $relatedImg): ?>
                <div class="image-container" data-image-id="<?= $relatedImg['id']; ?>">
                    <img class="gallery-img" src="<?= $relatedImg['photo_path']; ?>" alt="Photo">

                    <?php if($condition) : ?>

                        <div class="comments-container">
                            <?php foreach($imgComments[$relatedImg['id']] as $imgComment): ?>
                                <p>
                                    <strong><?= htmlspecialchars($imgComment['username']); ?>:</strong>
                                    <?= $imgComment['content']; ?>
                                </p>
                            <?php endforeach; ?>
                        </div>

                        <div class="like-actions">
                            <p class="like-count">Likes: <?= $imgLikes[$relatedImg['id']]; ?></p>
                            <button type="button" class="button like-button">Like</button>
                        </div>

                        <div class="comment-action-container">
                            <textarea name="comment-area" id="" placeholder="Type Your Comment"></textarea>
                            <button type="button" class="button comment-button">Comment</button>
                        </div>

                    <?php endif; ?>
                
                </div>
                    
                    
            <?php endforeach; ?>

                


            <div class="pagination">
                <?php if ($page > 1){ ?>
                    <a href="?page=<?php echo $page - 1; ?>">&laquo; Prev</a>&nbsp;
                <?php } ?>

                <?php for($i=1; $i<=$totalPages; $i++){ ?>
                    <a href="?page=<?php echo $i; ?>"><?php echo $i; ?></a>&nbsp;
                <?php } ?>

                <?php if ($page < $totalPages){ ?>
                    <a href="?page=<?php echo $page + 1; ?>">Next &raquo;</a>
                <?php } ?>
            </div>

        </section>

    </main>

    
	 <footer>
		<p class="p">Author: eablak</p>
		<p class="p"><a href="#">eablak@student.42istanbul.com.tr</a></p>
	</footer> 

</body>

<script src="/assets/js/imgActionHandler.js"></script>

</html>